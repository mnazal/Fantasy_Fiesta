const cheerio = require('cheerio');
const axios = require('axios');

async function fetchData(url) {
  try {
    const response = await axios.get('https://www.espn.in/football/lineups/_/gameId/699817');
    const html = response.data;
    const $ = cheerio.load(html);

    // Find the script tag (adjust the selector as needed)
    const scriptContent = $('script').html();
    console.log(scriptContent);

    // Extract JSON from the script content
    const jsonData = extractJsonFromScript(scriptContent);

    
  } catch (error) {
    console.error(error);
  }
}

function extractJsonFromScript(scriptContent) {
  // Regular expression to find JSON objects within the script content
  const jsonPattern = /({.*?})/g;
  const jsonMatches = [];
  let match;

  // Iterate over all matches
  while ((match = jsonPattern.exec(scriptContent)) !== null) {
    try {
      // Try to parse each match as JSON
      const json = JSON.parse(match[0]);
      jsonMatches.push(json);
    } catch (e) {
      // Skip any non-JSON content
      continue;
    }
  }

  return jsonMatches;
}

// Example usage
fetchData('https://example.com');
